define(['jquery',"underscore",'Magento_Ui/js/form/form','ko','uiRegistry','mage/translate','Magento_Checkout/js/model/quote','mage/template'],function($,_,Component,ko,registry,$t){'use strict';return Component.extend({defaults:{formElement:'#shipping-additional-information'},initialize:function(){var self=this,originAction;this._super();registry.async('checkout.steps.shipping-step.shippingAddress')(function(shipping){originAction=shipping.setShippingInformation.bind(shipping);shipping.setShippingInformation=function(){shipping.validateShippingInformation();if(self.validate()){originAction();}}});return this;},validate:function(){this.source.set('params.invalid',false);this.source.trigger('data.validate');return!Boolean(this.source.get('params.invalid'));},setVisibleElementVatInformation:function($elements,$visibleValue,$changeLabel=false,vatAdditionalOptionValue=null){var self=this,listElement=['company_name','company_address','tax_code'];$.each($elements,function(index,element){if(listElement.indexOf(element.index)>=0){if($changeLabel){var newLabel=self.getLabelByElement(element.index,vatAdditionalOptionValue);if(newLabel){element.label=newLabel;var subLabel=element.subLabel();if(self.hasWhiteSpace(subLabel)){subLabel=':'}else{subLabel+=' ';}
element.subLabel(subLabel);}}
element.visible($visibleValue);}});},hasWhiteSpace:function(string){return string.indexOf(' ')>=0;},getLabelByElement:function(elementName,vatAdditionalOptionValue){var listElement={'2':{'company_name':$t('Company Name'),'tax_code':$t('Tax Code'),'company_address':$t('Company Address')},'3':{'company_name':$t('Name (same passport)'),'tax_code':$t('Passport'),'company_address':$t('Nationality')}};var newLabel=null;$.each(listElement,function(index,element){if(index==vatAdditionalOptionValue){if(element.hasOwnProperty(elementName)){newLabel=element[elementName];return false;}}});return newLabel;}});});