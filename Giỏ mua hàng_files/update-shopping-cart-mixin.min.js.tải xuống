define(['ko','jquery','underscore'],function(ko,$,_){'use strict';var modalWidgetMixin={_create:function(){var self=this,debounce=_.debounce(function(currentEl){self.updateQty(currentEl,currentEl,parseInt(currentEl.val()));},1000);this._on(self.element,{'submit':self.onSubmit});$('body').on('click','.decrease-qty',function(){self.decreaseQty($(this));}).on('click','.increase-qty',function(){self.increaseQty($(this));}).on('keyup','.input-text.qty',function(e){debounce($(this));});},decreaseQty:function(currentEl){var cartItemInputQty=currentEl.parent().find('.input-text'),newQty=parseInt(cartItemInputQty.val())-1;newQty=newQty<0?0:newQty;this.updateQty(currentEl,cartItemInputQty,newQty);},increaseQty:function(button){var cartItemInputQty=button.parent().find('.input-text'),newQty=parseInt(cartItemInputQty.val())+1;cartItemInputQty.val(newQty);this.submitForm();},updateQty:function(currentEl,inputQtyEl,newQty){newQty=newQty<0?0:newQty;if(newQty===0){var wrapEl=currentEl.closest('.dataItem-header-2col'),deleteEl=wrapEl.find('.action-delete');deleteEl[0].click();}else{inputQtyEl.val(newQty);this.submitForm();}}};return function(targetWidget){$.widget('mage.updateShoppingCart',targetWidget,modalWidgetMixin);return $.mage.updateShoppingCart;};});